
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Labubu Movie Picker</title>
  <style>
    @font-face {
      font-family: 'Chewy Bubble';
      src: url('ChewyBubble.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    .puff {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #ccc;
      border-radius: 50%;
      opacity: 0.7;
      animation: puffAnim 1s ease-out forwards;
    }

    @keyframes puffAnim {
      0%   { transform: scale(1) translateY(0); opacity: 0.7; }
      100% { transform: scale(3) translateY(-50px); opacity: 0; }
    }
    </style>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js">
    function showPuffs() {
      const num = 8;
      for (let i = 0; i < num; i++) {
        const puff = document.createElement('div');
        puff.className = 'puff';
        puff.style.left = (50 + Math.random() * 30 - 15) + '%';
        puff.style.top = (50 + Math.random() * 20 - 10) + '%';
        puff.style.position = 'absolute';
        document.body.appendChild(puff);
        setTimeout(() => puff.remove(), 1000);
      }
    }
    </script>
  <style>
    body {
      font-family: 'Chewy Bubble', cursive;
      background: linear-gradient(to bottom, #ffccff, #ffe6f2);
      color: #ff3399;
      text-align: center;
      padding: 20px;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }
    button {
      padding: 12px 20px;
      margin: 10px;
      font-size: 1rem;
      cursor: pointer;
      background: #ff66b2;
      color: #fff;
      border: none;
      border-radius: 10px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
    }
    .slot {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      padding: 1.5rem;
      border: 4px dashed #ff99cc;
      background: #fff0f5;
      margin: 20px auto;
      width: 80%;
      max-width: 400px;
      border-radius: 20px;
      min-height: 70px;
      text-align: center;
      color: #ff3399;
    }
    .labubu-img {
      width: 160px;
      margin: 0 auto;
      display: none;
    }
    #labubuMessage {
      font-size: 1.1rem;
      color: #ff3399;
      margin: 12px auto;
    }
    #moodMeter {
      width: 80%;
      max-width: 300px;
      height: 20px;
      border: 2px solid #cc66aa;
      border-radius: 10px;
      margin-top: 10px;
    }
    #moodFill {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, #66ccff, #ffcc00, #ff3366);
      border-radius: 10px;
    }
    #popup {
      background: #fff;
      color: #ff3399;
      border: 3px solid #ff66b2;
      padding: 20px;
      margin: 20px auto;
      width: 80%;
      max-width: 400px;
      border-radius: 12px;
      display: none;
    }
    #popup a {
      color: #ff3399;
      font-weight: bold;
    }
  
    .puff {
      position: absolute;
      width: 20px;
      height: 20px;
      background: #ccc;
      border-radius: 50%;
      opacity: 0.7;
      animation: puffAnim 1s ease-out forwards;
    }

    @keyframes puffAnim {
      0%   { transform: scale(1) translateY(0); opacity: 0.7; }
      100% { transform: scale(3) translateY(-50px); opacity: 0; }
    }
    </style>
</head>
<body>

  <h1 style="font-family: 'Chewy Bubble', cursive;">Labubu's Movie Picker</h1>

  <div id="labubuFaces">
    <img src="LabubuNeutral.png" id="faceNeutral" class="labubu-img" style="display:block;" />
    <img src="LabubuThinking.png" id="faceThinking" class="labubu-img" />
    <img src="LabubuExcited.png" id="faceExcited" class="labubu-img" />
    <img src="LabubuAngry.png" id="faceAngry" class="labubu-img" />
  </div>

  <p id="labubuMessage"></p>

  <div id="moodMeter">
    <div id="moodFill"></div>
  </div>

  <div class="slot" id="movieSlot">Ready to spin?</div>
  <button onclick="spinSlot()" id="spinBtn">Spin Movie!</button>

  <div id="popup"></div>

  <audio id="spinSound" src="spinSound.mp3" preload="auto"></audio>
    <audio id="labubuVoice" src="labubuVoice.mp3" preload="auto"></audio>
<audio id="labubuVoiceAngry" src="labubuVoiceAngry.mp3" preload="auto"></audio>

  <script>
    const movies = ["Blue", "Kingdom of Heaven", "Repo Man", "Indiana Jones", "Coherence", "Vivarium", "Kes", "Apartment 7A", "The Professional", "All of Us Strangers", "The Ascent", "La Chimera", "To Live & Die in LA", "Sorcerer", "Virgin Suicides", "Dream Scenario", "Fury Road", "Perfect Blue", "Enter the Void", "Roma"];
    let spinCount = 0;
    const maxSpins = 3;
    let currentMovie = "";

    function updateLabubuFace() {
      const faces = ["Neutral", "Thinking", "Excited", "Angry"];
      faces.forEach(face => document.getElementById("face" + face).style.display = "none");
      if (spinCount === 0) {
        document.getElementById("faceNeutral").style.display = "block";
      } else if (spinCount === 1) {
        document.getElementById("faceThinking").style.display = "block";
      } else if (spinCount === 2) {
        document.getElementById("faceExcited").style.display = "block";
      } else {
        document.getElementById("faceAngry").style.display = "block";
      }
    }

    function updateLabubuMessage() {
      const msg = document.getElementById("labubuMessage");
      if (spinCount === 0) {
        msg.innerText = "ðŸ’¬ Labubu says: Let's pick a movie! ðŸŽ²";
      } else if (spinCount === 1) {
        msg.innerText = "ðŸ’¬ Labubu says: That was fun! Wanna spin again?";
      } else if (spinCount === 2) {
        msg.innerText = "ðŸ’¬ Labubu says: Last chance! Choose wisely... ðŸ§";
      } else {
        msg.innerText = "ðŸ’¬ Labubu says: Iâ€™ve made a pick for you! You must watch it now, teehee! ðŸŽ‰";
      }
    }

    function updateMood() {
      const fill = document.getElementById("moodFill");
      const percent = Math.min((spinCount / maxSpins) * 100, 100);
      fill.style.width = percent + "%";
    }

    function playSound(id) {
      const sound = document.getElementById(id);
      sound.currentTime = 0;
      sound.play();
    }

    function updateButtonLabel() {
      const btn = document.getElementById("spinBtn");
      if (spinCount === 0) {
        btn.innerText = "Spin Movie!";
      } else if (spinCount === 1) {
        btn.innerText = "Spin Again?";
      } else if (spinCount === 2) {
        btn.innerText = "Last Chance!";
      } else {
        btn.innerText = "No Spins Left";
        btn.disabled = true;
      }
    }

    function spinSlot() {
      const display = document.getElementById("movieSlot");
      document.getElementById("popup").style.display = "none";
      playSound("spinSound");
      updateLabubuFace();
      updateLabubuMessage();
      updateMood();
      updateButtonLabel();

      let count = 0;
      const interval = setInterval(() => {
        const randomMovie = movies[Math.floor(Math.random() * movies.length)];
        display.textContent = randomMovie;
        currentMovie = randomMovie;
        count++;
        if (count > 30) {
          clearInterval(interval);
                              showPopup(currentMovie);
          spinCount++;
          updateLabubuFace();
          updateLabubuMessage();
          updateMood();
          updateButtonLabel();
          if (spinCount === maxSpins) { playSound("labubuVoiceAngry"); showPuffs(); } else { playSound("labubuVoice"); }
        }
      }, 100);
    }

    function showPopup(movie) {
      const popup = document.getElementById('popup');
      popup.innerHTML = `<strong>You should watch:</strong> <em>${movie}</em><br><br>
        <a href="https://www.youtube.com/results?search_query=${encodeURIComponent(movie + ' trailer')}" target="_blank">
          ðŸŽ¬ Watch Trailer
        </a>`;
      popup.style.display = "block";
    }
  
    function showPuffs() {
      const num = 8;
      for (let i = 0; i < num; i++) {
        const puff = document.createElement('div');
        puff.className = 'puff';
        puff.style.left = (50 + Math.random() * 30 - 15) + '%';
        puff.style.top = (50 + Math.random() * 20 - 10) + '%';
        puff.style.position = 'absolute';
        document.body.appendChild(puff);
        setTimeout(() => puff.remove(), 1000);
      }
    }
    </script>
</body>
</html>
